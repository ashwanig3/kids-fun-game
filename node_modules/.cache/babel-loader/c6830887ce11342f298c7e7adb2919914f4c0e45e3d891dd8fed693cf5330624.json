{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar EnterLeaveCounter_1 = require(\"./EnterLeaveCounter\");\nvar BrowserDetector_1 = require(\"./BrowserDetector\");\nvar OffsetUtils_1 = require(\"./OffsetUtils\");\nvar NativeDragSources_1 = require(\"./NativeDragSources\");\nvar NativeTypes = require(\"./NativeTypes\");\nvar defaults = require('lodash/defaults');\nvar HTML5Backend = /** @class */function () {\n  function HTML5Backend(manager) {\n    var _this = this;\n    this.sourcePreviewNodes = new Map();\n    this.sourcePreviewNodeOptions = new Map();\n    this.sourceNodes = new Map();\n    this.sourceNodeOptions = new Map();\n    this.dragStartSourceIds = null;\n    this.dropTargetIds = [];\n    this.dragEnterTargetIds = [];\n    this.currentNativeSource = null;\n    this.currentNativeHandle = null;\n    this.currentDragSourceNode = null;\n    this.altKeyPressed = false;\n    this.mouseMoveTimeoutTimer = null;\n    this.asyncEndDragFrameId = null;\n    this.dragOverTargetIds = null;\n    this.getSourceClientOffset = function (sourceId) {\n      return OffsetUtils_1.getNodeClientOffset(_this.sourceNodes.get(sourceId));\n    };\n    this.endDragNativeItem = function () {\n      if (!_this.isDraggingNativeItem()) {\n        return;\n      }\n      _this.actions.endDrag();\n      _this.registry.removeSource(_this.currentNativeHandle);\n      _this.currentNativeHandle = null;\n      _this.currentNativeSource = null;\n    };\n    this.isNodeInDocument = function (node) {\n      // Check the node either in the main document or in the current context\n      return !!document && document.body.contains(node) || !!_this.window && _this.window.document.body.contains(node);\n    };\n    this.endDragIfSourceWasRemovedFromDOM = function () {\n      var node = _this.currentDragSourceNode;\n      if (_this.isNodeInDocument(node)) {\n        return;\n      }\n      if (_this.clearCurrentDragSourceNode()) {\n        _this.actions.endDrag();\n      }\n    };\n    this.handleTopDragStartCapture = function () {\n      _this.clearCurrentDragSourceNode();\n      _this.dragStartSourceIds = [];\n    };\n    this.handleTopDragStart = function (e) {\n      var dragStartSourceIds = _this.dragStartSourceIds;\n      _this.dragStartSourceIds = null;\n      var clientOffset = OffsetUtils_1.getEventClientOffset(e);\n      // Avoid crashing if we missed a drop event or our previous drag died\n      if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n      // Fire off the initial coordinates\n      _this.actions.initCoords(dragStartSourceIds || [], {\n        getSourceClientOffset: _this.getSourceClientOffset,\n        clientOffset: clientOffset\n      });\n      // Don't publish the source just yet (see why below)\n      _this.actions.beginDrag(dragStartSourceIds || [], {\n        publishSource: false,\n        getSourceClientOffset: _this.getSourceClientOffset,\n        clientOffset: clientOffset\n      });\n      var dataTransfer = e.dataTransfer;\n      var nativeType = NativeDragSources_1.matchNativeItemType(dataTransfer);\n      if (_this.monitor.isDragging()) {\n        if (typeof dataTransfer.setDragImage === 'function') {\n          // Use custom drag image if user specifies it.\n          // If child drag source refuses drag but parent agrees,\n          // use parent's node as drag image. Neither works in IE though.\n          var sourceId = _this.monitor.getSourceId();\n          var sourceNode = _this.sourceNodes.get(sourceId);\n          var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n          var _a = _this.getCurrentSourcePreviewNodeOptions(),\n            anchorX = _a.anchorX,\n            anchorY = _a.anchorY,\n            offsetX = _a.offsetX,\n            offsetY = _a.offsetY;\n          var anchorPoint = {\n            anchorX: anchorX,\n            anchorY: anchorY\n          };\n          var offsetPoint = {\n            offsetX: offsetX,\n            offsetY: offsetY\n          };\n          var dragPreviewOffset = OffsetUtils_1.getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n          dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n        }\n        try {\n          // Firefox won't drag without setting data\n          dataTransfer.setData('application/json', {});\n        } catch (err) {\n          // IE doesn't support MIME types in setData\n        }\n        // Store drag source node so we can check whether\n        // it is removed from DOM and trigger endDrag manually.\n        _this.setCurrentDragSourceNode(e.target);\n        // Now we are ready to publish the drag source.. or are we not?\n        var captureDraggingState = _this.getCurrentSourcePreviewNodeOptions().captureDraggingState;\n        if (!captureDraggingState) {\n          // Usually we want to publish it in the next tick so that browser\n          // is able to screenshot the current (not yet dragging) state.\n          //\n          // It also neatly avoids a situation where render() returns null\n          // in the same tick for the source element, and browser freaks out.\n          setTimeout(function () {\n            return _this.actions.publishDragSource();\n          }, 0);\n        } else {\n          // In some cases the user may want to override this behavior, e.g.\n          // to work around IE not supporting custom drag previews.\n          //\n          // When using a custom drag layer, the only way to prevent\n          // the default drag preview from drawing in IE is to screenshot\n          // the dragging state in which the node itself has zero opacity\n          // and height. In this case, though, returning null from render()\n          // will abruptly end the dragging, which is not obvious.\n          //\n          // This is the reason such behavior is strictly opt-in.\n          _this.actions.publishDragSource();\n        }\n      } else if (nativeType) {\n        // A native item (such as URL) dragged from inside the document\n        _this.beginDragNativeItem(nativeType);\n      } else if (!dataTransfer.types && (!e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n        // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n        // Just let it drag. It's a native type (URL or text) and will be picked up in\n        // dragenter handler.\n        return;\n      } else {\n        // If by this time no drag source reacted, tell browser not to drag.\n        e.preventDefault();\n      }\n    };\n    this.handleTopDragEndCapture = function () {\n      if (_this.clearCurrentDragSourceNode()) {\n        // Firefox can dispatch this event in an infinite loop\n        // if dragend handler does something like showing an alert.\n        // Only proceed if we have not handled it already.\n        _this.actions.endDrag();\n      }\n    };\n    this.handleTopDragEnterCapture = function (e) {\n      _this.dragEnterTargetIds = [];\n      var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n      if (!isFirstEnter || _this.monitor.isDragging()) {\n        return;\n      }\n      var dataTransfer = e.dataTransfer;\n      var nativeType = NativeDragSources_1.matchNativeItemType(dataTransfer);\n      if (nativeType) {\n        // A native item (such as file or URL) dragged from outside the document\n        _this.beginDragNativeItem(nativeType);\n      }\n    };\n    this.handleTopDragEnter = function (e) {\n      var dragEnterTargetIds = _this.dragEnterTargetIds;\n      _this.dragEnterTargetIds = [];\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        return;\n      }\n      _this.altKeyPressed = e.altKey;\n      if (!BrowserDetector_1.isFirefox()) {\n        // Don't emit hover in `dragenter` on Firefox due to an edge case.\n        // If the target changes position as the result of `dragenter`, Firefox\n        // will still happily dispatch `dragover` despite target being no longer\n        // there. The easy solution is to only fire `hover` in `dragover` on FF.\n        _this.actions.hover(dragEnterTargetIds, {\n          clientOffset: OffsetUtils_1.getEventClientOffset(e)\n        });\n      }\n      var canDrop = dragEnterTargetIds.some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n      if (canDrop) {\n        // IE requires this to fire dragover events\n        e.preventDefault();\n        e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n      }\n    };\n    this.handleTopDragOverCapture = function () {\n      _this.dragOverTargetIds = [];\n    };\n    this.handleTopDragOver = function (e) {\n      var dragOverTargetIds = _this.dragOverTargetIds;\n      _this.dragOverTargetIds = [];\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        // Prevent default \"drop and blow away the whole document\" action.\n        e.preventDefault();\n        e.dataTransfer.dropEffect = 'none';\n        return;\n      }\n      _this.altKeyPressed = e.altKey;\n      _this.actions.hover(dragOverTargetIds || [], {\n        clientOffset: OffsetUtils_1.getEventClientOffset(e)\n      });\n      var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n      if (canDrop) {\n        // Show user-specified drop effect.\n        e.preventDefault();\n        e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n      } else if (_this.isDraggingNativeItem()) {\n        // Don't show a nice cursor but still prevent default\n        // \"drop and blow away the whole document\" action.\n        e.preventDefault();\n        e.dataTransfer.dropEffect = 'none';\n      } else {\n        e.preventDefault();\n        e.dataTransfer.dropEffect = 'none';\n      }\n    };\n    this.handleTopDragLeaveCapture = function (e) {\n      if (_this.isDraggingNativeItem()) {\n        e.preventDefault();\n      }\n      var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n      if (!isLastLeave) {\n        return;\n      }\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      }\n    };\n    this.handleTopDropCapture = function (e) {\n      _this.dropTargetIds = [];\n      e.preventDefault();\n      if (_this.isDraggingNativeItem()) {\n        _this.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer);\n      }\n      _this.enterLeaveCounter.reset();\n    };\n    this.handleTopDrop = function (e) {\n      var dropTargetIds = _this.dropTargetIds;\n      _this.dropTargetIds = [];\n      _this.actions.hover(dropTargetIds, {\n        clientOffset: OffsetUtils_1.getEventClientOffset(e)\n      });\n      _this.actions.drop({\n        dropEffect: _this.getCurrentDropEffect()\n      });\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      } else {\n        _this.endDragIfSourceWasRemovedFromDOM();\n      }\n    };\n    this.handleSelectStart = function (e) {\n      var target = e.target;\n      // Only IE requires us to explicitly say\n      // we want drag drop operation to start\n      if (typeof target.dragDrop !== 'function') {\n        return;\n      }\n      // Inputs and textareas should be selectable\n      if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n        return;\n      }\n      // For other targets, ask IE\n      // to enable drag and drop\n      e.preventDefault();\n      target.dragDrop();\n    };\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.registry = manager.getRegistry();\n    this.context = manager.getContext();\n    this.enterLeaveCounter = new EnterLeaveCounter_1.default(this.isNodeInDocument);\n  }\n  Object.defineProperty(HTML5Backend.prototype, \"window\", {\n    // public for test\n    get: function () {\n      if (this.context && this.context.window) {\n        return this.context.window;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n      return undefined;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  HTML5Backend.prototype.setup = function () {\n    if (this.window === undefined) {\n      return;\n    }\n    if (this.window.__isReactDndBackendSetUp) {\n      throw new Error('Cannot have two HTML5 backends at the same time.');\n    }\n    this.window.__isReactDndBackendSetUp = true;\n    this.addEventListeners(this.window);\n  };\n  HTML5Backend.prototype.teardown = function () {\n    if (this.window === undefined) {\n      return;\n    }\n    this.window.__isReactDndBackendSetUp = false;\n    this.removeEventListeners(this.window);\n    this.clearCurrentDragSourceNode();\n    if (this.asyncEndDragFrameId) {\n      this.window.cancelAnimationFrame(this.asyncEndDragFrameId);\n    }\n  };\n  HTML5Backend.prototype.connectDragPreview = function (sourceId, node, options) {\n    var _this = this;\n    this.sourcePreviewNodeOptions.set(sourceId, options);\n    this.sourcePreviewNodes.set(sourceId, node);\n    return function () {\n      _this.sourcePreviewNodes.delete(sourceId);\n      _this.sourcePreviewNodeOptions.delete(sourceId);\n    };\n  };\n  HTML5Backend.prototype.connectDragSource = function (sourceId, node, options) {\n    var _this = this;\n    this.sourceNodes.set(sourceId, node);\n    this.sourceNodeOptions.set(sourceId, options);\n    var handleDragStart = function (e) {\n      return _this.handleDragStart(e, sourceId);\n    };\n    var handleSelectStart = function (e) {\n      return _this.handleSelectStart(e);\n    };\n    node.setAttribute('draggable', true);\n    node.addEventListener('dragstart', handleDragStart);\n    node.addEventListener('selectstart', handleSelectStart);\n    return function () {\n      _this.sourceNodes.delete(sourceId);\n      _this.sourceNodeOptions.delete(sourceId);\n      node.removeEventListener('dragstart', handleDragStart);\n      node.removeEventListener('selectstart', handleSelectStart);\n      node.setAttribute('draggable', false);\n    };\n  };\n  HTML5Backend.prototype.connectDropTarget = function (targetId, node) {\n    var _this = this;\n    var handleDragEnter = function (e) {\n      return _this.handleDragEnter(e, targetId);\n    };\n    var handleDragOver = function (e) {\n      return _this.handleDragOver(e, targetId);\n    };\n    var handleDrop = function (e) {\n      return _this.handleDrop(e, targetId);\n    };\n    node.addEventListener('dragenter', handleDragEnter);\n    node.addEventListener('dragover', handleDragOver);\n    node.addEventListener('drop', handleDrop);\n    return function () {\n      node.removeEventListener('dragenter', handleDragEnter);\n      node.removeEventListener('dragover', handleDragOver);\n      node.removeEventListener('drop', handleDrop);\n    };\n  };\n  HTML5Backend.prototype.addEventListeners = function (target) {\n    // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n    if (!target.addEventListener) {\n      return;\n    }\n    target.addEventListener('dragstart', this.handleTopDragStart);\n    target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n    target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n    target.addEventListener('dragenter', this.handleTopDragEnter);\n    target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n    target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n    target.addEventListener('dragover', this.handleTopDragOver);\n    target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n    target.addEventListener('drop', this.handleTopDrop);\n    target.addEventListener('drop', this.handleTopDropCapture, true);\n  };\n  HTML5Backend.prototype.removeEventListeners = function (target) {\n    // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n    if (!target.removeEventListener) {\n      return;\n    }\n    target.removeEventListener('dragstart', this.handleTopDragStart);\n    target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n    target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n    target.removeEventListener('dragenter', this.handleTopDragEnter);\n    target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n    target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n    target.removeEventListener('dragover', this.handleTopDragOver);\n    target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n    target.removeEventListener('drop', this.handleTopDrop);\n    target.removeEventListener('drop', this.handleTopDropCapture, true);\n  };\n  HTML5Backend.prototype.getCurrentSourceNodeOptions = function () {\n    var sourceId = this.monitor.getSourceId();\n    var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n    return defaults(sourceNodeOptions || {}, {\n      dropEffect: this.altKeyPressed ? 'copy' : 'move'\n    });\n  };\n  HTML5Backend.prototype.getCurrentDropEffect = function () {\n    if (this.isDraggingNativeItem()) {\n      // It makes more sense to default to 'copy' for native resources\n      return 'copy';\n    }\n    return this.getCurrentSourceNodeOptions().dropEffect;\n  };\n  HTML5Backend.prototype.getCurrentSourcePreviewNodeOptions = function () {\n    var sourceId = this.monitor.getSourceId();\n    var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n    return defaults(sourcePreviewNodeOptions || {}, {\n      anchorX: 0.5,\n      anchorY: 0.5,\n      captureDraggingState: false\n    });\n  };\n  HTML5Backend.prototype.isDraggingNativeItem = function () {\n    var itemType = this.monitor.getItemType();\n    return Object.keys(NativeTypes).some(function (key) {\n      return NativeTypes[key] === itemType;\n    });\n  };\n  HTML5Backend.prototype.beginDragNativeItem = function (type) {\n    this.clearCurrentDragSourceNode();\n    var SourceType = NativeDragSources_1.createNativeDragSource(type);\n    this.currentNativeSource = new SourceType();\n    this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n    this.actions.beginDrag([this.currentNativeHandle]);\n  };\n  HTML5Backend.prototype.setCurrentDragSourceNode = function (node) {\n    var _this = this;\n    this.clearCurrentDragSourceNode();\n    this.currentDragSourceNode = node;\n    // A timeout of > 0 is necessary to resolve Firefox issue referenced\n    // See:\n    //   * https://github.com/react-dnd/react-dnd/pull/928\n    //   * https://github.com/react-dnd/react-dnd/issues/869\n    var MOUSE_MOVE_TIMEOUT = 1000;\n    // Receiving a mouse event in the middle of a dragging operation\n    // means it has ended and the drag source node disappeared from DOM,\n    // so the browser didn't dispatch the dragend event.\n    //\n    // We need to wait before we start listening for mousemove events.\n    // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n    // immediately in some browsers.\n    //\n    // See:\n    //   * https://github.com/react-dnd/react-dnd/pull/928\n    //   * https://github.com/react-dnd/react-dnd/issues/869\n    //\n    this.mouseMoveTimeoutTimer = setTimeout(function () {\n      return _this.window && _this.window.addEventListener('mousemove', _this.endDragIfSourceWasRemovedFromDOM, true);\n    }, MOUSE_MOVE_TIMEOUT);\n  };\n  HTML5Backend.prototype.clearCurrentDragSourceNode = function () {\n    if (this.currentDragSourceNode) {\n      this.currentDragSourceNode = null;\n      if (this.window) {\n        this.window.clearTimeout(this.mouseMoveTimeoutTimer);\n        this.window.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n      }\n      this.mouseMoveTimeoutTimer = null;\n      return true;\n    }\n    return false;\n  };\n  HTML5Backend.prototype.handleDragStart = function (e, sourceId) {\n    if (!this.dragStartSourceIds) {\n      this.dragStartSourceIds = [];\n    }\n    this.dragStartSourceIds.unshift(sourceId);\n  };\n  HTML5Backend.prototype.handleDragEnter = function (e, targetId) {\n    this.dragEnterTargetIds.unshift(targetId);\n  };\n  HTML5Backend.prototype.handleDragOver = function (e, targetId) {\n    if (this.dragOverTargetIds === null) {\n      this.dragOverTargetIds = [];\n    }\n    this.dragOverTargetIds.unshift(targetId);\n  };\n  HTML5Backend.prototype.handleDrop = function (e, targetId) {\n    this.dropTargetIds.unshift(targetId);\n  };\n  return HTML5Backend;\n}();\nexports.default = HTML5Backend;","map":{"version":3,"names":["Object","defineProperty","exports","value","EnterLeaveCounter_1","require","BrowserDetector_1","OffsetUtils_1","NativeDragSources_1","NativeTypes","defaults","HTML5Backend","manager","_this","sourcePreviewNodes","Map","sourcePreviewNodeOptions","sourceNodes","sourceNodeOptions","dragStartSourceIds","dropTargetIds","dragEnterTargetIds","currentNativeSource","currentNativeHandle","currentDragSourceNode","altKeyPressed","mouseMoveTimeoutTimer","asyncEndDragFrameId","dragOverTargetIds","getSourceClientOffset","sourceId","getNodeClientOffset","get","endDragNativeItem","isDraggingNativeItem","actions","endDrag","registry","removeSource","isNodeInDocument","node","document","body","contains","window","endDragIfSourceWasRemovedFromDOM","clearCurrentDragSourceNode","handleTopDragStartCapture","handleTopDragStart","e","clientOffset","getEventClientOffset","monitor","isDragging","initCoords","beginDrag","publishSource","dataTransfer","nativeType","matchNativeItemType","setDragImage","getSourceId","sourceNode","dragPreview","_a","getCurrentSourcePreviewNodeOptions","anchorX","anchorY","offsetX","offsetY","anchorPoint","offsetPoint","dragPreviewOffset","getDragPreviewOffset","x","y","setData","err","setCurrentDragSourceNode","target","captureDraggingState","setTimeout","publishDragSource","beginDragNativeItem","types","hasAttribute","preventDefault","handleTopDragEndCapture","handleTopDragEnterCapture","isFirstEnter","enterLeaveCounter","enter","handleTopDragEnter","altKey","isFirefox","hover","canDrop","some","targetId","canDropOnTarget","dropEffect","getCurrentDropEffect","handleTopDragOverCapture","handleTopDragOver","handleTopDragLeaveCapture","isLastLeave","leave","handleTopDropCapture","mutateItemByReadingDataTransfer","reset","handleTopDrop","drop","handleSelectStart","dragDrop","tagName","isContentEditable","getActions","getMonitor","getRegistry","context","getContext","default","prototype","undefined","enumerable","configurable","setup","__isReactDndBackendSetUp","Error","addEventListeners","teardown","removeEventListeners","cancelAnimationFrame","connectDragPreview","options","set","delete","connectDragSource","handleDragStart","setAttribute","addEventListener","removeEventListener","connectDropTarget","handleDragEnter","handleDragOver","handleDrop","getCurrentSourceNodeOptions","itemType","getItemType","keys","key","type","SourceType","createNativeDragSource","addSource","MOUSE_MOVE_TIMEOUT","clearTimeout","unshift"],"sources":["/Users/vishalgoswami/Documents/work/my-repo/kids-fun-game/node_modules/.pnpm/react-dnd-html5-backend@6.0.0/node_modules/react-dnd-html5-backend/lib/HTML5Backend.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EnterLeaveCounter_1 = require(\"./EnterLeaveCounter\");\nvar BrowserDetector_1 = require(\"./BrowserDetector\");\nvar OffsetUtils_1 = require(\"./OffsetUtils\");\nvar NativeDragSources_1 = require(\"./NativeDragSources\");\nvar NativeTypes = require(\"./NativeTypes\");\nvar defaults = require('lodash/defaults');\nvar HTML5Backend = /** @class */ (function () {\n    function HTML5Backend(manager) {\n        var _this = this;\n        this.sourcePreviewNodes = new Map();\n        this.sourcePreviewNodeOptions = new Map();\n        this.sourceNodes = new Map();\n        this.sourceNodeOptions = new Map();\n        this.dragStartSourceIds = null;\n        this.dropTargetIds = [];\n        this.dragEnterTargetIds = [];\n        this.currentNativeSource = null;\n        this.currentNativeHandle = null;\n        this.currentDragSourceNode = null;\n        this.altKeyPressed = false;\n        this.mouseMoveTimeoutTimer = null;\n        this.asyncEndDragFrameId = null;\n        this.dragOverTargetIds = null;\n        this.getSourceClientOffset = function (sourceId) {\n            return OffsetUtils_1.getNodeClientOffset(_this.sourceNodes.get(sourceId));\n        };\n        this.endDragNativeItem = function () {\n            if (!_this.isDraggingNativeItem()) {\n                return;\n            }\n            _this.actions.endDrag();\n            _this.registry.removeSource(_this.currentNativeHandle);\n            _this.currentNativeHandle = null;\n            _this.currentNativeSource = null;\n        };\n        this.isNodeInDocument = function (node) {\n            // Check the node either in the main document or in the current context\n            return ((!!document && document.body.contains(node)) ||\n                (!!_this.window && _this.window.document.body.contains(node)));\n        };\n        this.endDragIfSourceWasRemovedFromDOM = function () {\n            var node = _this.currentDragSourceNode;\n            if (_this.isNodeInDocument(node)) {\n                return;\n            }\n            if (_this.clearCurrentDragSourceNode()) {\n                _this.actions.endDrag();\n            }\n        };\n        this.handleTopDragStartCapture = function () {\n            _this.clearCurrentDragSourceNode();\n            _this.dragStartSourceIds = [];\n        };\n        this.handleTopDragStart = function (e) {\n            var dragStartSourceIds = _this.dragStartSourceIds;\n            _this.dragStartSourceIds = null;\n            var clientOffset = OffsetUtils_1.getEventClientOffset(e);\n            // Avoid crashing if we missed a drop event or our previous drag died\n            if (_this.monitor.isDragging()) {\n                _this.actions.endDrag();\n            }\n            // Fire off the initial coordinates\n            _this.actions.initCoords(dragStartSourceIds || [], {\n                getSourceClientOffset: _this.getSourceClientOffset,\n                clientOffset: clientOffset,\n            });\n            // Don't publish the source just yet (see why below)\n            _this.actions.beginDrag(dragStartSourceIds || [], {\n                publishSource: false,\n                getSourceClientOffset: _this.getSourceClientOffset,\n                clientOffset: clientOffset,\n            });\n            var dataTransfer = e.dataTransfer;\n            var nativeType = NativeDragSources_1.matchNativeItemType(dataTransfer);\n            if (_this.monitor.isDragging()) {\n                if (typeof dataTransfer.setDragImage === 'function') {\n                    // Use custom drag image if user specifies it.\n                    // If child drag source refuses drag but parent agrees,\n                    // use parent's node as drag image. Neither works in IE though.\n                    var sourceId = _this.monitor.getSourceId();\n                    var sourceNode = _this.sourceNodes.get(sourceId);\n                    var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n                    var _a = _this.getCurrentSourcePreviewNodeOptions(), anchorX = _a.anchorX, anchorY = _a.anchorY, offsetX = _a.offsetX, offsetY = _a.offsetY;\n                    var anchorPoint = { anchorX: anchorX, anchorY: anchorY };\n                    var offsetPoint = { offsetX: offsetX, offsetY: offsetY };\n                    var dragPreviewOffset = OffsetUtils_1.getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n                    dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n                }\n                try {\n                    // Firefox won't drag without setting data\n                    dataTransfer.setData('application/json', {});\n                }\n                catch (err) {\n                    // IE doesn't support MIME types in setData\n                }\n                // Store drag source node so we can check whether\n                // it is removed from DOM and trigger endDrag manually.\n                _this.setCurrentDragSourceNode(e.target);\n                // Now we are ready to publish the drag source.. or are we not?\n                var captureDraggingState = _this.getCurrentSourcePreviewNodeOptions().captureDraggingState;\n                if (!captureDraggingState) {\n                    // Usually we want to publish it in the next tick so that browser\n                    // is able to screenshot the current (not yet dragging) state.\n                    //\n                    // It also neatly avoids a situation where render() returns null\n                    // in the same tick for the source element, and browser freaks out.\n                    setTimeout(function () { return _this.actions.publishDragSource(); }, 0);\n                }\n                else {\n                    // In some cases the user may want to override this behavior, e.g.\n                    // to work around IE not supporting custom drag previews.\n                    //\n                    // When using a custom drag layer, the only way to prevent\n                    // the default drag preview from drawing in IE is to screenshot\n                    // the dragging state in which the node itself has zero opacity\n                    // and height. In this case, though, returning null from render()\n                    // will abruptly end the dragging, which is not obvious.\n                    //\n                    // This is the reason such behavior is strictly opt-in.\n                    _this.actions.publishDragSource();\n                }\n            }\n            else if (nativeType) {\n                // A native item (such as URL) dragged from inside the document\n                _this.beginDragNativeItem(nativeType);\n            }\n            else if (!dataTransfer.types &&\n                (!e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n                // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n                // Just let it drag. It's a native type (URL or text) and will be picked up in\n                // dragenter handler.\n                return;\n            }\n            else {\n                // If by this time no drag source reacted, tell browser not to drag.\n                e.preventDefault();\n            }\n        };\n        this.handleTopDragEndCapture = function () {\n            if (_this.clearCurrentDragSourceNode()) {\n                // Firefox can dispatch this event in an infinite loop\n                // if dragend handler does something like showing an alert.\n                // Only proceed if we have not handled it already.\n                _this.actions.endDrag();\n            }\n        };\n        this.handleTopDragEnterCapture = function (e) {\n            _this.dragEnterTargetIds = [];\n            var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n            if (!isFirstEnter || _this.monitor.isDragging()) {\n                return;\n            }\n            var dataTransfer = e.dataTransfer;\n            var nativeType = NativeDragSources_1.matchNativeItemType(dataTransfer);\n            if (nativeType) {\n                // A native item (such as file or URL) dragged from outside the document\n                _this.beginDragNativeItem(nativeType);\n            }\n        };\n        this.handleTopDragEnter = function (e) {\n            var dragEnterTargetIds = _this.dragEnterTargetIds;\n            _this.dragEnterTargetIds = [];\n            if (!_this.monitor.isDragging()) {\n                // This is probably a native item type we don't understand.\n                return;\n            }\n            _this.altKeyPressed = e.altKey;\n            if (!BrowserDetector_1.isFirefox()) {\n                // Don't emit hover in `dragenter` on Firefox due to an edge case.\n                // If the target changes position as the result of `dragenter`, Firefox\n                // will still happily dispatch `dragover` despite target being no longer\n                // there. The easy solution is to only fire `hover` in `dragover` on FF.\n                _this.actions.hover(dragEnterTargetIds, {\n                    clientOffset: OffsetUtils_1.getEventClientOffset(e),\n                });\n            }\n            var canDrop = dragEnterTargetIds.some(function (targetId) {\n                return _this.monitor.canDropOnTarget(targetId);\n            });\n            if (canDrop) {\n                // IE requires this to fire dragover events\n                e.preventDefault();\n                e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n            }\n        };\n        this.handleTopDragOverCapture = function () {\n            _this.dragOverTargetIds = [];\n        };\n        this.handleTopDragOver = function (e) {\n            var dragOverTargetIds = _this.dragOverTargetIds;\n            _this.dragOverTargetIds = [];\n            if (!_this.monitor.isDragging()) {\n                // This is probably a native item type we don't understand.\n                // Prevent default \"drop and blow away the whole document\" action.\n                e.preventDefault();\n                e.dataTransfer.dropEffect = 'none';\n                return;\n            }\n            _this.altKeyPressed = e.altKey;\n            _this.actions.hover(dragOverTargetIds || [], {\n                clientOffset: OffsetUtils_1.getEventClientOffset(e),\n            });\n            var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n                return _this.monitor.canDropOnTarget(targetId);\n            });\n            if (canDrop) {\n                // Show user-specified drop effect.\n                e.preventDefault();\n                e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n            }\n            else if (_this.isDraggingNativeItem()) {\n                // Don't show a nice cursor but still prevent default\n                // \"drop and blow away the whole document\" action.\n                e.preventDefault();\n                e.dataTransfer.dropEffect = 'none';\n            }\n            else {\n                e.preventDefault();\n                e.dataTransfer.dropEffect = 'none';\n            }\n        };\n        this.handleTopDragLeaveCapture = function (e) {\n            if (_this.isDraggingNativeItem()) {\n                e.preventDefault();\n            }\n            var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n            if (!isLastLeave) {\n                return;\n            }\n            if (_this.isDraggingNativeItem()) {\n                _this.endDragNativeItem();\n            }\n        };\n        this.handleTopDropCapture = function (e) {\n            _this.dropTargetIds = [];\n            e.preventDefault();\n            if (_this.isDraggingNativeItem()) {\n                _this.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer);\n            }\n            _this.enterLeaveCounter.reset();\n        };\n        this.handleTopDrop = function (e) {\n            var dropTargetIds = _this.dropTargetIds;\n            _this.dropTargetIds = [];\n            _this.actions.hover(dropTargetIds, {\n                clientOffset: OffsetUtils_1.getEventClientOffset(e),\n            });\n            _this.actions.drop({ dropEffect: _this.getCurrentDropEffect() });\n            if (_this.isDraggingNativeItem()) {\n                _this.endDragNativeItem();\n            }\n            else {\n                _this.endDragIfSourceWasRemovedFromDOM();\n            }\n        };\n        this.handleSelectStart = function (e) {\n            var target = e.target;\n            // Only IE requires us to explicitly say\n            // we want drag drop operation to start\n            if (typeof target.dragDrop !== 'function') {\n                return;\n            }\n            // Inputs and textareas should be selectable\n            if (target.tagName === 'INPUT' ||\n                target.tagName === 'SELECT' ||\n                target.tagName === 'TEXTAREA' ||\n                target.isContentEditable) {\n                return;\n            }\n            // For other targets, ask IE\n            // to enable drag and drop\n            e.preventDefault();\n            target.dragDrop();\n        };\n        this.actions = manager.getActions();\n        this.monitor = manager.getMonitor();\n        this.registry = manager.getRegistry();\n        this.context = manager.getContext();\n        this.enterLeaveCounter = new EnterLeaveCounter_1.default(this.isNodeInDocument);\n    }\n    Object.defineProperty(HTML5Backend.prototype, \"window\", {\n        // public for test\n        get: function () {\n            if (this.context && this.context.window) {\n                return this.context.window;\n            }\n            else if (typeof window !== 'undefined') {\n                return window;\n            }\n            return undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HTML5Backend.prototype.setup = function () {\n        if (this.window === undefined) {\n            return;\n        }\n        if (this.window.__isReactDndBackendSetUp) {\n            throw new Error('Cannot have two HTML5 backends at the same time.');\n        }\n        this.window.__isReactDndBackendSetUp = true;\n        this.addEventListeners(this.window);\n    };\n    HTML5Backend.prototype.teardown = function () {\n        if (this.window === undefined) {\n            return;\n        }\n        this.window.__isReactDndBackendSetUp = false;\n        this.removeEventListeners(this.window);\n        this.clearCurrentDragSourceNode();\n        if (this.asyncEndDragFrameId) {\n            this.window.cancelAnimationFrame(this.asyncEndDragFrameId);\n        }\n    };\n    HTML5Backend.prototype.connectDragPreview = function (sourceId, node, options) {\n        var _this = this;\n        this.sourcePreviewNodeOptions.set(sourceId, options);\n        this.sourcePreviewNodes.set(sourceId, node);\n        return function () {\n            _this.sourcePreviewNodes.delete(sourceId);\n            _this.sourcePreviewNodeOptions.delete(sourceId);\n        };\n    };\n    HTML5Backend.prototype.connectDragSource = function (sourceId, node, options) {\n        var _this = this;\n        this.sourceNodes.set(sourceId, node);\n        this.sourceNodeOptions.set(sourceId, options);\n        var handleDragStart = function (e) { return _this.handleDragStart(e, sourceId); };\n        var handleSelectStart = function (e) { return _this.handleSelectStart(e); };\n        node.setAttribute('draggable', true);\n        node.addEventListener('dragstart', handleDragStart);\n        node.addEventListener('selectstart', handleSelectStart);\n        return function () {\n            _this.sourceNodes.delete(sourceId);\n            _this.sourceNodeOptions.delete(sourceId);\n            node.removeEventListener('dragstart', handleDragStart);\n            node.removeEventListener('selectstart', handleSelectStart);\n            node.setAttribute('draggable', false);\n        };\n    };\n    HTML5Backend.prototype.connectDropTarget = function (targetId, node) {\n        var _this = this;\n        var handleDragEnter = function (e) { return _this.handleDragEnter(e, targetId); };\n        var handleDragOver = function (e) { return _this.handleDragOver(e, targetId); };\n        var handleDrop = function (e) { return _this.handleDrop(e, targetId); };\n        node.addEventListener('dragenter', handleDragEnter);\n        node.addEventListener('dragover', handleDragOver);\n        node.addEventListener('drop', handleDrop);\n        return function () {\n            node.removeEventListener('dragenter', handleDragEnter);\n            node.removeEventListener('dragover', handleDragOver);\n            node.removeEventListener('drop', handleDrop);\n        };\n    };\n    HTML5Backend.prototype.addEventListeners = function (target) {\n        // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n        if (!target.addEventListener) {\n            return;\n        }\n        target.addEventListener('dragstart', this.handleTopDragStart);\n        target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n        target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n        target.addEventListener('dragenter', this.handleTopDragEnter);\n        target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n        target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n        target.addEventListener('dragover', this.handleTopDragOver);\n        target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n        target.addEventListener('drop', this.handleTopDrop);\n        target.addEventListener('drop', this.handleTopDropCapture, true);\n    };\n    HTML5Backend.prototype.removeEventListeners = function (target) {\n        // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n        if (!target.removeEventListener) {\n            return;\n        }\n        target.removeEventListener('dragstart', this.handleTopDragStart);\n        target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n        target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n        target.removeEventListener('dragenter', this.handleTopDragEnter);\n        target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n        target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n        target.removeEventListener('dragover', this.handleTopDragOver);\n        target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n        target.removeEventListener('drop', this.handleTopDrop);\n        target.removeEventListener('drop', this.handleTopDropCapture, true);\n    };\n    HTML5Backend.prototype.getCurrentSourceNodeOptions = function () {\n        var sourceId = this.monitor.getSourceId();\n        var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n        return defaults(sourceNodeOptions || {}, {\n            dropEffect: this.altKeyPressed ? 'copy' : 'move',\n        });\n    };\n    HTML5Backend.prototype.getCurrentDropEffect = function () {\n        if (this.isDraggingNativeItem()) {\n            // It makes more sense to default to 'copy' for native resources\n            return 'copy';\n        }\n        return this.getCurrentSourceNodeOptions().dropEffect;\n    };\n    HTML5Backend.prototype.getCurrentSourcePreviewNodeOptions = function () {\n        var sourceId = this.monitor.getSourceId();\n        var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n        return defaults(sourcePreviewNodeOptions || {}, {\n            anchorX: 0.5,\n            anchorY: 0.5,\n            captureDraggingState: false,\n        });\n    };\n    HTML5Backend.prototype.isDraggingNativeItem = function () {\n        var itemType = this.monitor.getItemType();\n        return Object.keys(NativeTypes).some(function (key) { return NativeTypes[key] === itemType; });\n    };\n    HTML5Backend.prototype.beginDragNativeItem = function (type) {\n        this.clearCurrentDragSourceNode();\n        var SourceType = NativeDragSources_1.createNativeDragSource(type);\n        this.currentNativeSource = new SourceType();\n        this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n        this.actions.beginDrag([this.currentNativeHandle]);\n    };\n    HTML5Backend.prototype.setCurrentDragSourceNode = function (node) {\n        var _this = this;\n        this.clearCurrentDragSourceNode();\n        this.currentDragSourceNode = node;\n        // A timeout of > 0 is necessary to resolve Firefox issue referenced\n        // See:\n        //   * https://github.com/react-dnd/react-dnd/pull/928\n        //   * https://github.com/react-dnd/react-dnd/issues/869\n        var MOUSE_MOVE_TIMEOUT = 1000;\n        // Receiving a mouse event in the middle of a dragging operation\n        // means it has ended and the drag source node disappeared from DOM,\n        // so the browser didn't dispatch the dragend event.\n        //\n        // We need to wait before we start listening for mousemove events.\n        // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n        // immediately in some browsers.\n        //\n        // See:\n        //   * https://github.com/react-dnd/react-dnd/pull/928\n        //   * https://github.com/react-dnd/react-dnd/issues/869\n        //\n        this.mouseMoveTimeoutTimer = setTimeout(function () {\n            return (_this.window &&\n                _this.window.addEventListener('mousemove', _this.endDragIfSourceWasRemovedFromDOM, true));\n        }, MOUSE_MOVE_TIMEOUT);\n    };\n    HTML5Backend.prototype.clearCurrentDragSourceNode = function () {\n        if (this.currentDragSourceNode) {\n            this.currentDragSourceNode = null;\n            if (this.window) {\n                this.window.clearTimeout(this.mouseMoveTimeoutTimer);\n                this.window.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n            }\n            this.mouseMoveTimeoutTimer = null;\n            return true;\n        }\n        return false;\n    };\n    HTML5Backend.prototype.handleDragStart = function (e, sourceId) {\n        if (!this.dragStartSourceIds) {\n            this.dragStartSourceIds = [];\n        }\n        this.dragStartSourceIds.unshift(sourceId);\n    };\n    HTML5Backend.prototype.handleDragEnter = function (e, targetId) {\n        this.dragEnterTargetIds.unshift(targetId);\n    };\n    HTML5Backend.prototype.handleDragOver = function (e, targetId) {\n        if (this.dragOverTargetIds === null) {\n            this.dragOverTargetIds = [];\n        }\n        this.dragOverTargetIds.unshift(targetId);\n    };\n    HTML5Backend.prototype.handleDrop = function (e, targetId) {\n        this.dropTargetIds.unshift(targetId);\n    };\n    return HTML5Backend;\n}());\nexports.default = HTML5Backend;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}